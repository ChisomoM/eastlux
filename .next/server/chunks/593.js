exports.id=593,exports.ids=[593],exports.modules={979:(a,b,c)=>{"use strict";c.d(b,{c:()=>d});let d=(0,c(48879).createContext)(void 0)},1186:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,85502,23)),Promise.resolve().then(c.t.bind(c,27105,23)),Promise.resolve().then(c.t.bind(c,22809,23)),Promise.resolve().then(c.t.bind(c,94304,23)),Promise.resolve().then(c.t.bind(c,18976,23)),Promise.resolve().then(c.t.bind(c,78580,23)),Promise.resolve().then(c.t.bind(c,40772,23)),Promise.resolve().then(c.t.bind(c,56181,23)),Promise.resolve().then(c.bind(c,90660))},5175:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>f});var d=c(18046);c(48879);var e=c(88003);function f({children:a,...b}){return(0,d.jsx)(e.N,{...b,children:a})}},5265:()=>{},8252:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j});var d=c(78160),e=c(50561),f=c.n(e);c(5265);var g=c(98968),h=c(70081),i=c(30210);function j({children:a}){return(0,d.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsxs)(h.ThemeProvider,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,children:[(0,d.jsx)(g.AuthProvider,{children:a}),(0,d.jsx)(i.Toaster,{position:"top-right",richColors:!0})]})})})}},8791:(a,b,c)=>{"use strict";c.d(b,{p_:()=>l,bE:()=>k,yo:()=>m});var d=c(54153),e=c.n(d);let f={___:"ff7daf99552e8f884ae28079ba098ef62101bab59d68b160e15e3dde8a56ae9963b8f5618cbf42dce3d4e2b4c999a5c980b46c340be0cc28376e6a6d2462369a",encrypt(a){return e().AES.encrypt(a,this.___).toString()},decrypt(a){return e().AES.decrypt(a,this.___).toString(e().enc.Utf8)},setItem(a,b){try{let c=String(b),d=this.encrypt(c);sessionStorage.setItem(a,d)}catch{throw Error("Failed to store encrypted data")}},setJSON(a,b){try{let c=JSON.stringify(b),d=this.encrypt(c);sessionStorage.setItem(a,d)}catch{throw Error("Failed to store encrypted JSON data")}},getItem(a){try{let b=sessionStorage.getItem(a);if(!b)return null;return this.decrypt(b)}catch{throw Error("Failed to retrieve encrypted data")}},getJSON(a){try{let b=sessionStorage.getItem(a);if(!b)return null;let c=this.decrypt(b);return JSON.parse(c)}catch{throw Error("Failed to retrieve encrypted JSON data")}},removeItem(a){try{let b=this.encrypt(a);sessionStorage.removeItem(b)}catch{throw Error("Failed to remove item")}},clear(){sessionStorage.clear()}},g={LOGIN:"auth/login",REGISTER:"auth/register",ADMIN_STATS:"admin/stats",ADMIN_CONTACTS:"admin/contacts",ADMIN_CONTACTS_DETAIL:"admin/contacts/:id",ADMIN_APPLICATIONS:"admin/applications",ADMIN_APPLICATIONS_DETAIL:"admin/applications/:id",CONTACT:"contact",RECRUITMENT:"recruitment",HEALTH:"health"},h=a=>{let b=g[a];if(null==b)throw Error("key doesn't exist");return b},i=async()=>{try{let a=document.cookie.replace(/(?:(?:^|.*;\s*)refreshToken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(!a)throw Error("No refresh token available in cookies");let b=await fetch(`${h("REFRESH_TOKEN")}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({refresh_token:a})});if(!b.ok)throw Error("Failed to refresh token");let c=await b.json();if(c?.access_token)return f.setItem("accessToken",c.access_token),c.access_token;if(c?.error)throw Error(c.error);throw Error("Failed to refresh token")}catch(a){throw console.error("Token refresh error:",a),sessionStorage.removeItem("accessToken"),document.cookie="refreshToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",a}},j=async(a,b,c={},d=null,e={},g={})=>{let j=new Headers;j.append("Content-Type","application/json"),Object.entries(g).forEach(([a,b])=>{j.append(a,String(b))});let k=new URLSearchParams(e).toString(),l=`${((a,b)=>a.replace(/:([^/]+)/g,(a,c)=>{if(c in b)return String(b[c]);throw Error(`Key "${c}" not found in the map`)}))(h(a),c)}${k?`?${k}`:""}`,m={method:b,headers:j,credentials:"include"};d&&(m.body=JSON.stringify(d));let n=await fetch(l,m);if(n.ok){if(204===n.status)return;let a=await n.json();if(0===a.status)return a.data;if(void 0!==a.success)if(a.success)return a.data||a;else throw Error(a.message||"Operation failed");if(void 0===a.status||0===a.status)return a.data||a;else throw Error(a.message||"Operation failed")}if(401===n.status&&!["LOGIN","ADMIN_LOGIN","REGISTER"].includes(a))try{let a=await i();if(f.setItem("accessToken",a),j.set("Authorization",`Bearer ${a}`),(n=await fetch(l,m)).ok){if(204===n.status)return;let a=await n.json();if(0!==a.status)throw Error(a.message);return a.data}}catch(a){throw console.error("Token refresh failed:",a),sessionStorage.removeItem("accessToken"),document.cookie="refreshToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",Error("SESSION_EXPIRED")}if(429===n.status)throw Error("Too many requests. Try again later");try{let a=await n.json(),b=a?.message||a?.error||`Error: ${n.status} ${n.statusText}`;throw Error(b)}catch(a){if(a instanceof Error)throw a;throw Error(`Error: ${n.status} ${n.statusText}`)}},k=(a,b,c={})=>j(a,"POST",c,b),l=(a,b={},c={})=>j(a,"GET",b,null,c),m=(a,b,c={})=>j(a,"PUT",c,b)},24950:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>k});var d=c(18046),e=c(48879),f=c(35352),g=c(86372),h=c(8791);let i={TOKENS:"auth_tokens",USER:"auth_user"};var j=c(979);function k({children:a}){let[b,c]=(0,e.useState)(null),[k,l]=(0,e.useState)(null),[m,n]=(0,e.useState)(!0),[o,p]=(0,e.useState)(null),q=(0,f.useRouter)(),r=(0,e.useCallback)(()=>{try{localStorage.removeItem(i.TOKENS),localStorage.removeItem(i.USER)}catch(a){console.error("Failed to clear storage:",a)}},[]);(0,e.useCallback)(()=>{try{let a=localStorage.getItem(i.TOKENS),b=localStorage.getItem(i.USER);if(a&&b){let d=JSON.parse(a),e=JSON.parse(b);l(d),c(e)}}catch(a){console.error("Failed to restore session from storage:",a),r()}finally{n(!1)}},[r]);let s=(0,e.useCallback)((a,b)=>{try{localStorage.setItem(i.USER,JSON.stringify(a)),localStorage.setItem(i.TOKENS,JSON.stringify(b))}catch(a){console.error("Failed to save auth state to storage:",a),g.o.error("Failed to save authentication state")}},[]),t=(0,e.useCallback)(a=>{let b={id:String(a.id??""),email:a.email??"",accountType:"admin",isActive:!a.blocked,isVerified:!0,firstName:a.first_name??void 0,lastName:a.last_name??void 0};return a.is_superUser&&(b.role="admin"),b},[]),u=(0,e.useCallback)(async(a,b)=>{try{n(!0),p(null);let d=await (0,h.bE)("LOGIN",{email:a,password:b}),e=d?.data??d,f=e?.user,i=e?.token;if(!f||!i)throw Error("Invalid login response from server");let j=t(f),k={token:i};s(j,k),l(k),c(j),g.o.success("Login successful!"),q.push("/admin/dashboard")}catch(b){let a=b instanceof Error?b.message:"Login failed";throw p(a),g.o.error(a),b}finally{n(!1)}},[s,q,t]),v=(0,e.useCallback)(async()=>{try{r(),l(null),c(null),p(null),q.push("/login"),g.o.success("Logged out successfully")}catch(a){console.error("Logout error:",a),g.o.error("Logout failed")}},[r,q]);return(0,d.jsx)(j.c.Provider,{value:{user:b,tokens:k,isLoading:m,isAuthenticated:!!b&&!!k,error:o,login:u,logout:v,setUser:c,setTokens:l,clearError:()=>p(null)},children:a})}},32472:(a,b,c)=>{Promise.resolve().then(c.bind(c,30210)),Promise.resolve().then(c.bind(c,70081)),Promise.resolve().then(c.bind(c,98968))},32730:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,75900,23)),Promise.resolve().then(c.t.bind(c,77991,23)),Promise.resolve().then(c.t.bind(c,7307,23)),Promise.resolve().then(c.t.bind(c,90398,23)),Promise.resolve().then(c.t.bind(c,99770,23)),Promise.resolve().then(c.t.bind(c,50366,23)),Promise.resolve().then(c.t.bind(c,92190,23)),Promise.resolve().then(c.t.bind(c,73947,23)),Promise.resolve().then(c.t.bind(c,13886,23))},42200:(a,b,c)=>{Promise.resolve().then(c.bind(c,86372)),Promise.resolve().then(c.bind(c,5175)),Promise.resolve().then(c.bind(c,24950))},70081:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>d});let d=(0,c(8180).registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Work\\Programming\\Projects\\Eastlux\\src\\components\\ui\\theme-provider.tsx","ThemeProvider")},83082:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(72353);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},98968:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>d});let d=(0,c(8180).registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Work\\Programming\\Projects\\Eastlux\\src\\lib\\context\\auth.tsx","AuthProvider")}};