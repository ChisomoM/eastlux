(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{153:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3"}},1568:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,153,23)),Promise.resolve().then(r.bind(r,3110)),Promise.resolve().then(r.t.bind(r,8925,23)),Promise.resolve().then(r.bind(r,1829)),Promise.resolve().then(r.bind(r,3795))},1703:(e,t,r)=>{"use strict";r.d(t,{D:()=>u,N:()=>d});var o=r(6469),a=(e,t,r,o,a,n,s,l)=>{let i=document.documentElement,c=["light","dark"];function u(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,o=r&&n?a.map(e=>n[e]||e):a;r?(i.classList.remove(...o),i.classList.add(n&&n[t]?n[t]:t)):i.setAttribute(e,t)}),r=t,l&&c.includes(r)&&(i.style.colorScheme=r)}if(o)u(o);else try{let e=localStorage.getItem(t)||r,o=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(o)}catch(e){}},n=["light","dark"],s="(prefers-color-scheme: dark)",l="undefined"==typeof window,i=o.createContext(void 0),c={setTheme:e=>{},themes:[]},u=()=>{var e;return null!=(e=o.useContext(i))?e:c},d=e=>o.useContext(i)?o.createElement(o.Fragment,null,e.children):o.createElement(m,{...e}),h=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:a=!0,enableColorScheme:l=!0,storageKey:c="theme",themes:u=h,defaultTheme:d=a?"system":"light",attribute:m="data-theme",value:p,children:E,nonce:v,scriptProps:T}=e,[k,w]=o.useState(()=>g(c,d)),[b,I]=o.useState(()=>"system"===k?S():k),N=p?Object.values(p):u,_=o.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=S());let o=p?p[t]:t,s=r?y(v):null,i=document.documentElement,c=e=>{"class"===e?(i.classList.remove(...N),o&&i.classList.add(o)):e.startsWith("data-")&&(o?i.setAttribute(e,o):i.removeAttribute(e))};if(Array.isArray(m)?m.forEach(c):c(m),l){let e=n.includes(d)?d:null,r=n.includes(t)?t:e;i.style.colorScheme=r}null==s||s()},[v]),O=o.useCallback(e=>{let t="function"==typeof e?e(k):e;w(t);try{localStorage.setItem(c,t)}catch(e){}},[k]),C=o.useCallback(e=>{I(S(e)),"system"===k&&a&&!t&&_("system")},[k,t]);o.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(C),C(e),()=>e.removeListener(C)},[C]),o.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?w(e.newValue):O(d))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[O]),o.useEffect(()=>{_(null!=t?t:k)},[t,k]);let A=o.useMemo(()=>({theme:k,setTheme:O,forcedTheme:t,resolvedTheme:"system"===k?b:k,themes:a?[...u,"system"]:u,systemTheme:a?b:void 0}),[k,O,t,b,a,u]);return o.createElement(i.Provider,{value:A},o.createElement(f,{forcedTheme:t,storageKey:c,attribute:m,enableSystem:a,enableColorScheme:l,defaultTheme:d,value:p,themes:u,nonce:v,scriptProps:T}),E)},f=o.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:n,enableSystem:s,enableColorScheme:l,defaultTheme:i,value:c,themes:u,nonce:d,scriptProps:h}=e,m=JSON.stringify([n,r,i,t,u,c,s,l]).slice(1,-1);return o.createElement("script",{...h,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(m,")")}})}),g=(e,t)=>{let r;if(!l){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},y=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},S=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")},1829:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>n});var o=r(5249);r(6469);var a=r(1703);function n(e){let{children:t,...r}=e;return(0,o.jsx)(a.N,{...r,children:t})}},3795:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>u});var o=r(5249),a=r(6469),n=r(4602),s=r(3110),l=r(8068);let i={TOKENS:"auth_tokens",USER:"auth_user"};var c=r(9085);function u(e){let{children:t}=e,[r,u]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(!0),[g,y]=(0,a.useState)(null),S=(0,n.useRouter)(),p=(0,a.useCallback)(()=>{try{localStorage.removeItem(i.TOKENS),localStorage.removeItem(i.USER)}catch(e){console.error("Failed to clear storage:",e)}},[]),E=(0,a.useCallback)(()=>{try{let e=localStorage.getItem(i.TOKENS),t=localStorage.getItem(i.USER);if(e&&t){let r=JSON.parse(e),o=JSON.parse(t);h(r),u(o)}}catch(e){console.error("Failed to restore session from storage:",e),p()}finally{f(!1)}},[p]),v=(0,a.useCallback)((e,t)=>{try{localStorage.setItem(i.USER,JSON.stringify(e)),localStorage.setItem(i.TOKENS,JSON.stringify(t))}catch(e){console.error("Failed to save auth state to storage:",e),s.o.error("Failed to save authentication state")}},[]),T=(0,a.useCallback)(e=>{var t,r,o,a,n;let s={id:String(null!=(t=e.id)?t:""),email:null!=(r=e.email)?r:"",accountType:"admin",isActive:!(null!=(o=e.blocked)&&o),isVerified:!0,firstName:null!=(a=e.first_name)?a:void 0,lastName:null!=(n=e.last_name)?n:void 0};return e.is_superUser&&(s.role="admin"),s},[]),k=(0,a.useCallback)(async(e,t)=>{try{var r;f(!0),y(null);let o=await (0,l.bE)("LOGIN",{email:e,password:t}),a=null!=(r=null==o?void 0:o.data)?r:o,n=null==a?void 0:a.user,i=null==a?void 0:a.token;if(!n||!i)throw Error("Invalid login response from server");let c=T(n),d={token:i};v(c,d),h(d),u(c),s.o.success("Login successful!"),S.push("/admin/dashboard")}catch(t){let e=t instanceof Error?t.message:"Login failed";throw y(e),s.o.error(e),t}finally{f(!1)}},[v,S,T]),w=(0,a.useCallback)(async()=>{try{p(),h(null),u(null),y(null),S.push("/login"),s.o.success("Logged out successfully")}catch(e){console.error("Logout error:",e),s.o.error("Logout failed")}},[p,S]);return(0,a.useEffect)(()=>{E()},[E]),(0,o.jsx)(c.c.Provider,{value:{user:r,tokens:d,isLoading:m,isAuthenticated:!!r&&!!d,error:g,login:k,logout:w,setUser:u,setTokens:h,clearError:()=>y(null)},children:t})}},3936:()=>{},4602:(e,t,r)=>{"use strict";var o=r(7550);r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},8068:(e,t,r)=>{"use strict";r.d(t,{p_:()=>d,bE:()=>u,yo:()=>h});var o=r(103),a=r.n(o);let n={___:"ff7daf99552e8f884ae28079ba098ef62101bab59d68b160e15e3dde8a56ae9963b8f5618cbf42dce3d4e2b4c999a5c980b46c340be0cc28376e6a6d2462369a",encrypt(e){return a().AES.encrypt(e,this.___).toString()},decrypt(e){return a().AES.decrypt(e,this.___).toString(a().enc.Utf8)},setItem(e,t){try{let r=String(t),o=this.encrypt(r);sessionStorage.setItem(e,o)}catch(e){throw Error("Failed to store encrypted data")}},setJSON(e,t){try{let r=JSON.stringify(t),o=this.encrypt(r);sessionStorage.setItem(e,o)}catch(e){throw Error("Failed to store encrypted JSON data")}},getItem(e){try{let t=sessionStorage.getItem(e);if(!t)return null;return this.decrypt(t)}catch(e){throw Error("Failed to retrieve encrypted data")}},getJSON(e){try{let t=sessionStorage.getItem(e);if(!t)return null;let r=this.decrypt(t);return JSON.parse(r)}catch(e){throw Error("Failed to retrieve encrypted JSON data")}},removeItem(e){try{let t=this.encrypt(e);sessionStorage.removeItem(t)}catch(e){throw Error("Failed to remove item")}},clear(){sessionStorage.clear()}},s={LOGIN:"auth/login",REGISTER:"auth/register",ADMIN_STATS:"admin/stats",ADMIN_CONTACTS:"admin/contacts",ADMIN_CONTACTS_DETAIL:"admin/contacts/:id",ADMIN_APPLICATIONS:"admin/applications",ADMIN_APPLICATIONS_DETAIL:"admin/applications/:id",CONTACT:"contact",RECRUITMENT:"recruitment",HEALTH:"health"},l=e=>{let t=s[e];if(null==t)throw Error("key doesn't exist");return t},i=async()=>{try{let e=document.cookie.replace(/(?:(?:^|.*;\s*)refreshToken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(!e)throw Error("No refresh token available in cookies");let t=await fetch("".concat("").concat(l("REFRESH_TOKEN")),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({refresh_token:e})});if(!t.ok)throw Error("Failed to refresh token");let r=await t.json();if(null==r?void 0:r.access_token)return n.setItem("accessToken",r.access_token),r.access_token;if(null==r?void 0:r.error)throw Error(r.error);throw Error("Failed to refresh token")}catch(e){throw console.error("Token refresh error:",e),sessionStorage.removeItem("accessToken"),document.cookie="refreshToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",e}},c=async function(e,t){let r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=new Headers;if(u.append("Content-Type","application/json"),!["LOGIN","ADMIN_LOGIN","REGISTER"].includes(e)){let e=(()=>{try{let e=localStorage.getItem("auth_tokens");if(!e)return null;let t=JSON.parse(e);return t.token||t.access_token||null}catch(e){return console.error("Failed to get access token from storage:",e),null}})();e&&u.append("Authorization","Bearer ".concat(e))}Object.entries(c).forEach(e=>{let[t,r]=e;u.append(t,String(r))});let d=new URLSearchParams(s).toString(),h="".concat("").concat((r=l(e),r.replace(/:([^/]+)/g,(e,t)=>{if(t in o)return String(o[t]);throw Error('Key "'.concat(t,'" not found in the map'))}))).concat(d?"?".concat(d):""),m={method:t,headers:u,credentials:"include"};a&&(m.body=JSON.stringify(a));let f=await fetch(h,m);if(f.ok){if(204===f.status)return;let e=await f.json();if(0===e.status)return e.data;if(void 0!==e.success)if(e.success)return e.data||e;else throw Error(e.message||"Operation failed");if(void 0===e.status||0===e.status)return e.data||e;else throw Error(e.message||"Operation failed")}if(401===f.status&&!["LOGIN","ADMIN_LOGIN","REGISTER"].includes(e))try{let e=await i();if(n.setItem("accessToken",e),u.set("Authorization","Bearer ".concat(e)),(f=await fetch(h,m)).ok){if(204===f.status)return;let e=await f.json();if(0!==e.status)throw Error(e.message);return e.data}}catch(e){throw console.error("Token refresh failed:",e),sessionStorage.removeItem("accessToken"),document.cookie="refreshToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",Error("SESSION_EXPIRED")}if(429===f.status)throw Error("Too many requests. Try again later");try{let e=await f.json(),t=(null==e?void 0:e.message)||(null==e?void 0:e.error)||"Error: ".concat(f.status," ").concat(f.statusText);throw Error(t)}catch(e){if(e instanceof Error)throw e;throw Error("Error: ".concat(f.status," ").concat(f.statusText))}},u=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(e,"POST",r,t)},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(e,"GET",t,null,r)},h=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(e,"PUT",r,t)}},8925:()=>{},9085:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});let o=(0,r(6469).createContext)(void 0)}},e=>{e.O(0,[1281,438,103,3110,2529,6677,7358],()=>e(e.s=1568)),_N_E=e.O()}]);