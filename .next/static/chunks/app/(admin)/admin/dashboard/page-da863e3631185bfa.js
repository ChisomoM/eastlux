(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1780],{385:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(6469),a=r(9085);function n(){let e=(0,s.useContext)(a.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1588:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>d,ZB:()=>c,Zp:()=>o,aR:()=>i});var s=r(5249),a=r(6469),n=r(9437);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},3936:()=>{},3947:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(3549).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},4654:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(5249),a=r(6469),n=r(5806),o=r(4071),i=r(9437);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-brand-main-900 text-white hover:bg-brand-main-800 shadow-lg hover:shadow-xl",accent:"bg-brand-secondary-500 text-white hover:bg-brand-secondary-600 shadow-lg hover:shadow-xl",gradient:"bg-brand-gradient text-white hover:opacity-90 shadow-lg hover:shadow-xl"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-14 rounded-md px-12 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:d=!1,...l}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:a,size:o,className:r})),ref:t,...l})});d.displayName="Button"},5914:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(3549).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},7209:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(3549).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7337:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5249),a=r(6469),n=r(1588),o=r(7743),i=r(4654),c=r(385),d=r(8068),l=r(5914),u=r(3947),h=r(8428),f=r(7209),m=r(1145),x=r.n(m);function p(){let{user:e}=(0,c.A)(),[t,r]=(0,a.useState)(null),[m,p]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{try{let e=await (0,d.p_)("ADMIN_STATS");r(e)}catch(e){console.error("Failed to fetch dashboard stats:",e)}finally{p(!1)}})()},[]),m)?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"grid gap-4",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Loading..."})}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})})]},t))})})}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-gray-600 mt-2",children:["Welcome back, ",(null==e?void 0:e.firstName)||(null==e?void 0:e.first_name)||"Admin"]})]}),(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Contacts"}),(0,s.jsx)(l.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==t?void 0:t.summary.totalContacts)||0}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==t?void 0:t.contacts.new)||0," new messages"]})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"DSA Applications"}),(0,s.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==t?void 0:t.summary.totalApplications)||0}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==t?void 0:t.applications.pending)||0," pending review"]})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Pending Items"}),(0,s.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==t?void 0:t.summary.pendingItems)||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Requires attention"})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Response Rate"}),(0,s.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[(null==t?void 0:t.contacts.total)?Math.round(t.contacts.responded/t.contacts.total*100):0,"%"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Contact responses"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Contact Management"})}),(0,s.jsxs)(n.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"New Messages"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null==t?void 0:t.contacts.new)||0})]}),(0,s.jsxs)(o.E,{variant:(null==t?void 0:t.contacts.new)?"destructive":"secondary",children:[(null==t?void 0:t.contacts.new)||0," pending"]})]}),(0,s.jsx)(i.$,{asChild:!0,className:"w-full",children:(0,s.jsx)(x(),{href:"/admin/contacts",children:"Manage Contacts"})})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"DSA Recruitment"})}),(0,s.jsxs)(n.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Pending Applications"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null==t?void 0:t.applications.pending)||0})]}),(0,s.jsxs)(o.E,{variant:(null==t?void 0:t.applications.pending)?"default":"secondary",children:[(null==t?void 0:t.applications.pending)||0," to review"]})]}),(0,s.jsx)(i.$,{asChild:!0,variant:"outline",className:"w-full",children:(0,s.jsx)(x(),{href:"/admin/applications",children:"Review Applications"})})]})]})]})]})]})}},7743:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var s=r(5249);r(6469);var a=r(4071),n=r(9437);let o=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",warning:"border-transparent bg-warning text-warning-foreground hover:bg-warning/80",outline:"text-foreground border-border",brand:"border-transparent bg-brand-main-900 text-white hover:bg-brand-main-800",accent:"border-transparent bg-brand-secondary-500 text-white hover:bg-brand-secondary-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(o({variant:r}),t),...a})}},8068:(e,t,r)=>{"use strict";r.d(t,{p_:()=>u,bE:()=>l,yo:()=>h});var s=r(103),a=r.n(s);let n={___:"ff7daf99552e8f884ae28079ba098ef62101bab59d68b160e15e3dde8a56ae9963b8f5618cbf42dce3d4e2b4c999a5c980b46c340be0cc28376e6a6d2462369a",encrypt(e){return a().AES.encrypt(e,this.___).toString()},decrypt(e){return a().AES.decrypt(e,this.___).toString(a().enc.Utf8)},setItem(e,t){try{let r=String(t),s=this.encrypt(r);sessionStorage.setItem(e,s)}catch(e){throw Error("Failed to store encrypted data")}},setJSON(e,t){try{let r=JSON.stringify(t),s=this.encrypt(r);sessionStorage.setItem(e,s)}catch(e){throw Error("Failed to store encrypted JSON data")}},getItem(e){try{let t=sessionStorage.getItem(e);if(!t)return null;return this.decrypt(t)}catch(e){throw Error("Failed to retrieve encrypted data")}},getJSON(e){try{let t=sessionStorage.getItem(e);if(!t)return null;let r=this.decrypt(t);return JSON.parse(r)}catch(e){throw Error("Failed to retrieve encrypted JSON data")}},removeItem(e){try{let t=this.encrypt(e);sessionStorage.removeItem(t)}catch(e){throw Error("Failed to remove item")}},clear(){sessionStorage.clear()}},o={LOGIN:"auth/login",REGISTER:"auth/register",ADMIN_STATS:"admin/stats",ADMIN_CONTACTS:"admin/contacts",ADMIN_CONTACTS_DETAIL:"admin/contacts/:id",ADMIN_APPLICATIONS:"admin/applications",ADMIN_APPLICATIONS_DETAIL:"admin/applications/:id",CONTACT:"contact",RECRUITMENT:"recruitment",HEALTH:"health"},i=e=>{let t=o[e];if(null==t)throw Error("key doesn't exist");return t},c=async()=>{try{let e=document.cookie.replace(/(?:(?:^|.*;\s*)refreshToken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(!e)throw Error("No refresh token available in cookies");let t=await fetch("".concat("").concat(i("REFRESH_TOKEN")),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({refresh_token:e})});if(!t.ok)throw Error("Failed to refresh token");let r=await t.json();if(null==r?void 0:r.access_token)return n.setItem("accessToken",r.access_token),r.access_token;if(null==r?void 0:r.error)throw Error(r.error);throw Error("Failed to refresh token")}catch(e){throw console.error("Token refresh error:",e),sessionStorage.removeItem("accessToken"),document.cookie="refreshToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",e}},d=async function(e,t){let r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=new Headers;if(l.append("Content-Type","application/json"),!["LOGIN","ADMIN_LOGIN","REGISTER"].includes(e)){let e=(()=>{try{let e=localStorage.getItem("auth_tokens");if(!e)return null;let t=JSON.parse(e);return t.token||t.access_token||null}catch(e){return console.error("Failed to get access token from storage:",e),null}})();e&&l.append("Authorization","Bearer ".concat(e))}Object.entries(d).forEach(e=>{let[t,r]=e;l.append(t,String(r))});let u=new URLSearchParams(o).toString(),h="".concat("").concat((r=i(e),r.replace(/:([^/]+)/g,(e,t)=>{if(t in s)return String(s[t]);throw Error('Key "'.concat(t,'" not found in the map'))}))).concat(u?"?".concat(u):""),f={method:t,headers:l,credentials:"include"};a&&(f.body=JSON.stringify(a));let m=await fetch(h,f);if(m.ok){if(204===m.status)return;let e=await m.json();if(0===e.status)return e.data;if(void 0!==e.success)if(e.success)return e.data||e;else throw Error(e.message||"Operation failed");if(void 0===e.status||0===e.status)return e.data||e;else throw Error(e.message||"Operation failed")}if(401===m.status&&!["LOGIN","ADMIN_LOGIN","REGISTER"].includes(e))try{let e=await c();if(n.setItem("accessToken",e),l.set("Authorization","Bearer ".concat(e)),(m=await fetch(h,f)).ok){if(204===m.status)return;let e=await m.json();if(0!==e.status)throw Error(e.message);return e.data}}catch(e){throw console.error("Token refresh failed:",e),sessionStorage.removeItem("accessToken"),document.cookie="refreshToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",Error("SESSION_EXPIRED")}if(429===m.status)throw Error("Too many requests. Try again later");try{let e=await m.json(),t=(null==e?void 0:e.message)||(null==e?void 0:e.error)||"Error: ".concat(m.status," ").concat(m.statusText);throw Error(t)}catch(e){if(e instanceof Error)throw e;throw Error("Error: ".concat(m.status," ").concat(m.statusText))}},l=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d(e,"POST",r,t)},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d(e,"GET",t,null,r)},h=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d(e,"PUT",r,t)}},8428:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(3549).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9085:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});let s=(0,r(6469).createContext)(void 0)},9437:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(1023);r(1467);var a=r(5507);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},9898:(e,t,r)=>{Promise.resolve().then(r.bind(r,7337))}},e=>{e.O(0,[8224,1145,103,2529,6677,7358],()=>e(e.s=9898)),_N_E=e.O()}]);