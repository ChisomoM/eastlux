(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5717],{6621:(e,s,a)=>{Promise.resolve().then(a.bind(a,8791))},8791:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var l=a(5249),t=a(6469),d=a(1588);a(7743);var c=a(4654),n=a(8006),r=a(5250),i=a(385),x=a(8068),h=a(5418);let j=(0,a(3549).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var m=a(424),o=a(637),p=a(1980);function N(){let{user:e}=(0,i.A)(),[s,a]=(0,t.useState)([]),[N,y]=(0,t.useState)(null),[u,v]=(0,t.useState)(!0),[g,f]=(0,t.useState)(null);(0,t.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await (0,x.p_)("ADMIN_CONTACTS");a(e.contacts||[]),y(e.stats||null)}catch(e){console.error("Failed to fetch contacts:",e)}finally{v(!1)}},w=async(e,s)=>{f(e);try{await (0,x.yo)("ADMIN_CONTACTS_DETAIL",{status:s},{id:e}),await b()}catch(e){console.error("Failed to update contact:",e)}finally{f(null)}};return u?(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,l.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Contact Management"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage customer inquiries and messages"})]}),N&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,l.jsx)(d.Zp,{children:(0,l.jsxs)(d.Wu,{className:"p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:N.total}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Contacts"})]})}),(0,l.jsx)(d.Zp,{children:(0,l.jsxs)(d.Wu,{className:"p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:N.new}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"New Messages"})]})}),(0,l.jsx)(d.Zp,{children:(0,l.jsxs)(d.Wu,{className:"p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:N.read}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Read"})]})}),(0,l.jsx)(d.Zp,{children:(0,l.jsxs)(d.Wu,{className:"p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:N.responded}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Responded"})]})})]}),(0,l.jsxs)(d.Zp,{children:[(0,l.jsx)(d.aR,{children:(0,l.jsx)(d.ZB,{children:"All Contacts"})}),(0,l.jsxs)(d.Wu,{children:[(0,l.jsxs)(n.XI,{children:[(0,l.jsx)(n.A0,{children:(0,l.jsxs)(n.Hj,{children:[(0,l.jsx)(n.nd,{children:"Name"}),(0,l.jsx)(n.nd,{children:"Contact"}),(0,l.jsx)(n.nd,{children:"Service"}),(0,l.jsx)(n.nd,{children:"Status"}),(0,l.jsx)(n.nd,{children:"Date"}),(0,l.jsx)(n.nd,{children:"Actions"})]})}),(0,l.jsx)(n.BF,{children:s.map(e=>(0,l.jsxs)(n.Hj,{children:[(0,l.jsxs)(n.nA,{children:[(0,l.jsx)("div",{className:"font-medium",children:e.name}),e.company&&(0,l.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,l.jsx)(j,{className:"h-3 w-3"}),e.company]})]}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,l.jsx)(m.A,{className:"h-3 w-3"}),e.email]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,l.jsx)(o.A,{className:"h-3 w-3"}),e.phone]})]})}),(0,l.jsx)(n.nA,{children:e.service}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)(r.l6,{value:e.status,onValueChange:s=>w(e.id,s),disabled:g===e.id,children:[(0,l.jsx)(r.bq,{className:"w-32",children:(0,l.jsx)(r.yv,{})}),(0,l.jsxs)(r.gC,{children:[(0,l.jsx)(r.eb,{value:"new",children:"New"}),(0,l.jsx)(r.eb,{value:"read",children:"Read"}),(0,l.jsx)(r.eb,{value:"responded",children:"Responded"})]})]})}),(0,l.jsx)(n.nA,{children:(0,h.GP)(new Date(e.created_at),"MMM dd, yyyy")}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,l.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"View"]})})]},e.id))})]}),0===s.length&&(0,l.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No contacts found"})]})]})]})}}},e=>{e.O(0,[8224,6655,6380,103,8214,9183,6217,6077,2529,6677,7358],()=>e(e.s=6621)),_N_E=e.O()}]);